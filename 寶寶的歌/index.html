<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>For You</title>
  <style>
    body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans TC",sans-serif;margin:0;padding:24px;line-height:1.6}
    .card{max-width:640px;margin:0 auto;padding:20px;border:1px solid #ddd;border-radius:14px}
    h1{margin:0 0 8px;font-size:22px}
    p{margin:10px 0}
    button{width:100%;padding:14px 16px;border-radius:12px;border:0;font-size:16px;cursor:pointer}
    .muted{color:#666;font-size:13px}
    audio{width:100%;margin-top:12px}
  </style>
</head>
<body>
  <div class="card">
    <h1 id="title">給妳的歌</h1>
    <p id="msg">載入中…</p>
    <button id="playBtn">點我播放</button>
    <p class="muted" id="detail"></p>
    <audio id="player" controls preload="auto"></audio>
  </div>

<script>
  // 依「手機本地時間」切歌：06-11 早上、11-18 白天、18-23 晚上、23-06 深夜
  function pickByHour(h){
    if(h>=6 && h<11) return {key:"morning", file:"audio/上班也沒關係EN.wav", text:"早上的風，有一點涼。今天慢慢來。"};
    if(h>=11 && h<18) return {key:"day", file:"audio/上班也沒關係EN.wav", text:"上班很辛苦。無聊就吃吃喝喝，有我陪你。"};
    if(h>=18 && h<23) return {key:"evening", file:"audio/上班也沒關係EN.wav", text:"不用趕路，不用想。今晚剛剛好。"};
    return {key:"night", file:"audio/上班也沒關係EN.wav, text:"如果妳還醒著，也沒關係。我在。"};
  }

  const now = new Date();
  const chosen = pickByHour(now.getHours());

  const msgEl = document.getElementById("msg");
  const detailEl = document.getElementById("detail");
  const player = document.getElementById("player");
  const btn = document.getElementById("playBtn");

  msgEl.textContent = chosen.text;
  detailEl.textContent = `現在時間：${now.toLocaleString()}｜版本：${chosen.key}`;
  player.src = chosen.file;

  // 手機常禁止自動播放，所以用按鈕啟動
  btn.addEventListener("click", async () => {
    try{
      if(player.paused) await player.play();
      else player.pause();
    }catch(e){
      btn.textContent = "播放失敗：請改用下方播放器控制列";
    }
  });

  player.addEventListener("play", ()=> btn.textContent="播放中（點一下暫停）");
  player.addEventListener("pause", ()=> btn.textContent="點我播放");
</script>
</body>
</html>

